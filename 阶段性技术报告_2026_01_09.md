# 教学管理与云实训平台 - 阶段性技术报告
#### 项目名称：颜值立方 / 教学管理平台 (Teaching Platform)
#### 当前版本：v1
#### 报告日期：2026-01-09

## 1. 系统概述
本系统是一款面向职业院校及培训机构的 SaaS 模式教学管理与实训平台。系统采用了 “教务与教学分离” 的架构设计，支持课程资源的标准化分发与班级个性化管理。核心特色在于集成了 图文课程学习、作业全流程管理以及云端算力实训（ComfyUI）的远程调度能力，实现了从“学”到“练”的完整闭环。

## 2. 系统架构与技术栈
### 2.1 前端架构
基于 Vue 3 构建的单页面应用，强调组件化与响应式体验。
- 核心框架：Vue 3 (Composition API) + TypeScript
- 构建工具：Vite 5.x
- 状态管理：Pinia (模块化管理 User, Permission)
- 路由管理：Vue Router 4 (支持动态路由与权限守卫)
- UI 组件库：Element Plus (深度定制青绿色 SaaS 主题) + VCalendar (iOS 风格日历)
- 数据可视化：ECharts 5 (作业完成率图表)
- 核心渲染器：
    - vue-pdf-embed: 实现 PDF 课件的流式渲染。
    - @vue-office/pptx: 实现 PPT 文件的在线预览。
- HTTP 请求：Axios (封装拦截器，处理 Token 注入与 401/422 异常)。

### 2.2 后端架构
基于 Python FastAPI 构建的高性能 RESTful API 服务，遵循分层架构 (Layered Architecture)。
- Web 框架：FastAPI (异步高性能)
- 服务器：Uvicorn (ASGI)
- 数据库 ORM：SQLAlchemy 2.0 (声明式模型)
- 数据校验：Pydantic V2 (严格的数据结构验证)
- 身份认证：OAuth2 + JWT (JSON Web Tokens) + Passlib (Bcrypt 密码哈希)
- 远程控制：Paramiko (SSH 协议，用于调度 GPU 服务器)
- 文件处理：Pandas / OpenPyXL (Excel 批量导入解析)
- 静态资源：FastAPI StaticFiles (本地文件存储方案)

### 2.3 数据库
- 数据库类型：MySQL 8.0
- 字符集：utf8mb4_unicode_ci

## 3. 系统环境要求
### 3.1 部署环境
- 操作系统：Linux (Ubuntu 20.04+) / Windows Server
- Python 环境：Python 3.10+
- Node.js 环境：Node.js 18+ (用于前端构建)
- 算力节点 (可选)：需配置 NVIDIA GPU 的服务器，预装 ComfyUI 及 Conda 环境，并开启 SSH 服务（端口 22）。

### 3.2 客户端要求
- 浏览器：Chrome 80+, Edge, Firefox, Safari (主流现代浏览器)。
- 显示器：建议分辨率 1920x1080 及以上以获得最佳沉浸式体验。

## 4. 数据库设计 (核心模型)
系统采用 “资源-容器-关联” 的三层设计模式，共 14 张核心表：

### 4.1 用户中心
- users: 核心账号表 (Username, PasswordHash, Role)。
- teacher_profiles: 教师扩展信息 (职称, 学院, 头像)。
- student_profiles: 学生扩展信息 (学号, 真实姓名, 头像)。
### 4.2 课程资源 (Content Layer)
- courses: 课程包元数据 (封面, 简介, 类型)。
- course_chapters: 课程章节结构。
- course_lessons: 具体课时资源 (PDF/PPT/Video 路径)。
- course_tasks: 标准作业模板。
### 4.3 教务管理 (Management Layer)
- classes: 教学班级 (容器，定义开结课时间)。
- enrollments: 学生与班级的 N:N 关联。
- class_course_bindings: 班级与课程包的 N:N 关联 (核心解耦表)。
- teacher_course_access: 教师对平台课程的访问权限表。
### 4.4 业务数据 (Business Layer)
- class_assignments: 班级作业实例 (含截止时间)。
- student_submissions: 学生作业提交记录 (含分数, 评语)。
- student_learning_progress: 学习进度记录 (断点续学支持)。


## 5. 功能模块详细说明
### 5.1 教师端
教师端定位为 “管理与分发中心”，采用青绿色系的专业管理界面。
- 工作台 (Dashboard)
    - 数据概览：实时统计学生总数（去重）、执教班级数、待批改作业数。
    - 班级卡片流：展示管理的班级，支持显示绑定的教材名称。
    - 新建班级：支持设置班级名称、封面、多选绑定课程、设定开结课时间。
- 班级与学员管理
    - 侧边抽屉模式：点击班级直接右侧滑出学员名单，不打断当前工作流。
    - 学员管理：支持手动添加学员、Excel 批量导入（包含数据清洗与错误报告）、移除学员。
- 课程资源库
    - SaaS 授权模式：展示平台所有课程，根据权限显示“已授权”或“锁定（变暗）”状态。
    - 资源预览：支持查看课程大纲，在线预览 PDF 课件，PPT 幻灯片演示模式。
    - 作业预览：查看该课程包含的标准作业要求。
- 作业发布管理
    - 支持查看作业模板在不同班级的发布状态。
    - 支持分班级设置截止时间 (Deadline)，一键发布。

### 5.2 学生端
学生端定位为 “沉浸式学习中心”，采用青绿色的轻量化设计。
- 我的课程 (Learning Center)
    - 数据扁平化：将所在班级的多门课程拆解为独立卡片展示。
    - 智能进度：卡片实时显示学习进度百分比（服务端计算）。
    - 讲师信息：动态展示授课老师的头像与职称。
- 沉浸式学习页 (Immersive Learning)
    - 布局：左侧折叠目录 + 右侧全屏阅读器。
    - PDF 阅读：支持连续滚动阅读、缩放。
    - PPT 演示：支持全屏放映模式，黑底影院级体验，支持键盘翻页。
    - 进度追踪：阅读到底部自动标记完成，左侧目录实时打钩 ✅。
    - 状态记忆：支持断点续学，下次打开自动跳转到上次阅读页码。
- 作业任务中心 (Homework Hub)
    - 看板视图：左侧任务列表 + 右侧数据图表（完成率环形图、紧急任务雷达）。
    - 状态流转：待完成 -> 批改中 -> 已批改。
    - 作业提交：支持富文本输入及 图片上传。
    - 前置锁：未完成课程学习前，禁止提交对应作业。
- 云端实训 (Cloud Training)
    - SSH 联动：一键唤醒局域网内的 ComfyUI 服务器。
    - 环境隔离：后端自动分配独立端口与工作目录，实现多租户隔离。